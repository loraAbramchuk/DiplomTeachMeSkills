{% extends 'base.html' %}
{% load static %}

{% block title %}{{ movie.title }}{% endblock %}

{% block content %}
<section class="movie-details-area movie-bg" data-background="{% static 'img/bg/movie_bg.jpg' %}">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="movie-details-content">
                    <div class="row">
                        <div class="col-xl-3 col-lg-4">
                            <div class="movie-details-poster">
                                {% if movie.poster %}
                                    <img src="{{ movie.poster.url }}" alt="{{ movie.title }}">
                                {% else %}
                                    <img src="{% static 'img/poster/no-poster.jpg' %}" alt="No poster">
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-xl-9 col-lg-8">
                            <div class="movie-details-box">
                                <h3 class="title">{{ movie.title }}</h3>
                                
                                <div class="movie-details-meta">
                                    <ul>
                                        <li class="quality">
                                            <span>{{ movie.quality }}</span>
                                        </li>
                                        <li>
                                            <span class="release-year"><i class="far fa-calendar-alt"></i> {{ movie.release_year }}</span>
                                        </li>
                                        {% if movie.duration %}
                                        <li>
                                            <span class="duration"><i class="far fa-clock"></i> {{ movie.duration }} мин</span>
                                        </li>
                                        {% endif %}
                                    </ul>
                                </div>

                                <div class="movie-details-genres">
                                    {% for genre in movie.genres.all %}
                                        <span class="genre-tag">{{ genre.name }}</span>
                                    {% endfor %}
                                </div>

                                {% if movie.kinopoisk_rating %}
                                <div class="movie-details-rating">
                                    <div class="rating">
                                        <i class="fas fa-star"></i>
                                        <span class="rating-value">{{ movie.kinopoisk_rating }}</span>
                                    </div>
                                    {% if movie.kinopoisk_url %}
                                    <a href="{{ movie.kinopoisk_url }}" target="_blank" class="kinopoisk-link">
                                        <i class="fas fa-external-link-alt"></i> Страница на Кинопоиске
                                    </a>
                                    {% endif %}
                                </div>
                                {% endif %}

                                <div class="movie-details-countries">
                                    {% for country in movie.countries.all %}
                                        <span class="country-tag">{{ country.name }}</span>
                                    {% endfor %}
                                </div>

                                <p class="movie-details-desc">
                                    {{ movie.description }}
                                </p>

                                <div class="movie-details-btn">
                                    {% if movie.trailer_url %}
                                    <a href="{{ movie.trailer_url }}" class="btn popup-video">
                                        <i class="fas fa-play"></i> Смотреть трейлер
                                    </a>
                                    {% endif %}

                                    {% if movie.watch_url %}
                                    <a href="{{ movie.watch_url }}" class="btn" target="_blank">
                                        <i class="fas fa-film"></i> Смотреть фильм
                                    </a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.movie-details-area {
    padding: 100px 0;
    position: relative;
    background-size: cover;
    background-position: center;
}

.movie-details-area::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(7, 7, 7, 0.95);
}

.movie-details-content {
    position: relative;
    z-index: 1;
}

.movie-details-poster {
    margin-bottom: 30px;
    border-radius: 5px;
    overflow: hidden;
}

.movie-details-poster img {
    width: 100%;
    height: auto;
    border-radius: 5px;
}

.movie-details-box {
    padding: 30px;
    background: rgba(32, 32, 32, 0.8);
    border-radius: 5px;
}

.movie-details-box .title {
    font-size: 36px;
    margin-bottom: 20px;
    color: #fff;
}

.movie-details-meta {
    margin-bottom: 20px;
}

.movie-details-meta ul {
    display: flex;
    align-items: center;
    gap: 20px;
    margin: 0;
    padding: 0;
    list-style: none;
}

.movie-details-meta ul li {
    color: #bcbcbc;
    font-size: 14px;
}

.movie-details-meta ul li.quality span {
    background: #e4d804;
    color: #000;
    padding: 4px 12px;
    border-radius: 4px;
    font-weight: 600;
}

.movie-details-meta ul li i {
    color: #e4d804;
    margin-right: 5px;
}

.movie-details-genres {
    margin-bottom: 20px;
}

.genre-tag {
    display: inline-block;
    padding: 5px 15px;
    background: #e4d804;
    color: #000;
    border-radius: 20px;
    margin: 0 5px 5px 0;
    font-size: 14px;
    font-weight: 500;
}

.movie-details-rating {
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 20px;
}

.rating {
    display: flex;
    align-items: center;
    gap: 10px;
}

.rating i {
    color: #e4d804;
}

.rating-value {
    color: #fff;
    font-size: 18px;
    font-weight: 600;
}

.kinopoisk-link {
    color: #e4d804;
    text-decoration: none;
    font-size: 14px;
    transition: all 0.3s ease;
}

.kinopoisk-link:hover {
    color: #fff;
}

.movie-details-countries {
    margin-bottom: 20px;
}

.country-tag {
    display: inline-block;
    padding: 5px 15px;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border-radius: 20px;
    margin: 0 5px 5px 0;
    font-size: 14px;
}

.movie-details-desc {
    color: #bcbcbc;
    font-size: 15px;
    line-height: 1.8;
    margin-bottom: 30px;
}

.movie-details-btn {
    display: flex;
    gap: 15px;
}

.movie-details-btn .btn {
    padding: 12px 25px;
    border-radius: 5px;
    font-size: 14px;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-transform: uppercase;
    transition: all 0.3s ease;
}

.movie-details-btn .btn i {
    font-size: 16px;
}

.movie-details-btn .popup-video {
    background: #e4d804;
    color: #000;
}

.movie-details-btn .popup-video:hover {
    background: #fff;
}

.movie-details-btn .btn:not(.popup-video) {
    background: transparent;
    border: 2px solid #e4d804;
    color: #e4d804;
}

.movie-details-btn .btn:not(.popup-video):hover {
    background: #e4d804;
    color: #000;
}
</style>
{% endblock %} 